(window.webpackJsonp=window.webpackJsonp||[]).push([["bundles/637aa6036536cb04f3a1f378656a0595"],{"4Ch9":function(e,t,a){"use strict";a.r(t),a.d(t,"ID_ASHVETS",function(){return p}),a.d(t,"ID_NSHKARUBA",function(){return d}),a.d(t,"ID_PKALAYDIN",function(){return _}),a.d(t,"CONSOLE_CUSTOM_NUM_FIELD",function(){return E}),a.d(t,"init",function(){return P}),a.d(t,"getParams",function(){return U}),a.d(t,"setOption",function(){return J}),a.d(t,"setUid",function(){return z}),a.d(t,"setIp",function(){return Y}),a.d(t,"setUaHash",function(){return q}),a.d(t,"setSpamtype",function(){return G}),a.d(t,"setConditions",function(){return X}),a.d(t,"setThreshold",function(){return Q}),a.d(t,"composeSearchLinkFromParams",function(){return Z}),a.d(t,"getNumericField",function(){return ae}),a.d(t,"getConditionsHint",function(){return oe}),a.d(t,"switchParams",function(){return ie}),a.d(t,"conditionsClear",function(){return le}),a.d(t,"optionClear",function(){return pe}),a.d(t,"addPatternPart",function(){return de}),a.d(t,"mount",function(){return me});a("pIFo"),a("Vd3H"),a("rGqo"),a("Btvt"),a("HEwt"),a("SRfc");var n,o,r,i=a("ofcU"),s=a("b8yN"),c=a("awNS"),l=a("t7n3"),p=1576215,d=138305184,u=163176673,_=143978,m="_console",h="console_locked",f="_apply_pattern",g="_search_reports",v="_get_pattern_link",b="debug_pattern",y="_pattern_part_child",k="_queries_toggle",w="console_show_message",S="_console_numfield_action",T="_nospam_console_custom_num_condition_pattern",C="nospam_console_custom_num_condition",x="_nospam_console_custom_num_condition_clear",D="_console_linkfield_action",B="console_set_range",L="console_uid",M="_option_clear",j="_conditions_clear",H="highlighted",O="_console_conditions",E="custom";function P(e){var t=e.conditions;t&&(ls.set(se(""),t),addClass(geByClass("conditions_clear_button")[0],H));var a=e.conditions2;a&&(ls.set(se("2"),a),addClass(geByClass("conditions_clear_button")[1],H))}function N(){return hasClass(c.consoleWrap,h)}function I(){N()||addClass(c.consoleWrap,h),removeClass(c.consoleWrap,w)}function F(){var e=geByClass1(f,c.patternWrap),t=geByClass1(g,c.patternWrap);N()&&removeClass(c.consoleWrap,h),unlockButton(e),unlockButton(t)}function W(e,t){var a=geByClass1("_console_error",c.consoleWrap),n=geByClass("console_item");a.innerHTML="",e||(e="");var o=ce("div");e&&(o.innerHTML=e),o.className=t?"error":"info_msg",e.match(/\/pattern[0-9]+/)&&n&&n.forEach(function(e){e.className="console_item red_item"}),addClass(c.consoleWrap,w),a.appendChild(o),F()}function R(e){n&&clearTimeout(n),n=setTimeout(()=>{domData(c.consoleWrap,"failed",0)},3e3),domData(c.consoleWrap,"failed",1),console.error(e),W(e,!0)}function A(){var e=ge("queries",c.consoleWrap);return geByClass1(k,c.consoleWrap).innerHTML=isVisible(e)?"Показать запросы":"Скрыть запросы",toggle(e)}function U(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a={},n=function(e){var t="conditions_input"===e.id?domPS(e):domNS(e);return hasClass(t,"option_cleared")},o=function(t){return e&&n(t)};a[`type${t}`]=cur[`uiSpamtype${t}`].val();var r=ge(`pattern_input${t}`);a[`pattern${t}`]=o(r)?$(r):r.value,a[`threshold${t}`]=ge(`threshold_input${t}`).value;var i=ge(`uid_input${t}`);a[`uid${t}`]=o(i)?$(i):i.value;var s=ge(`ip_input${t}`);a[`ip${t}`]=o(s)?$(s):s.value;var c=ge(`uahash_input${t}`);a[`uahash${t}`]=o(c)?$(c):c.value;var l=ge(`time_start_input${t}`);a[`time_start${t}`]=o(l)?$(l):l.value;var p=ge(`time_finish_input${t}`);a[`time_finish${t}`]=o(p)?$(p):p.value;var d=ge(`conditions_input${t}`);return a[`conditions${t}`]=o(d)?ls.get(se(t)):d.value,a},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[];Array.from(geByClass("option_cleared",e)).forEach(function(e){var t=geByTag1("input",domPN(e))||geByTag1("textarea",domPN(e));a.push(t.id)});var n=[];return a.forEach(e=>{switch(e){case`pattern_input${t}`:n|=cur.hideFieldsBitMasks.substring;break;case`ip_input${t}`:n|=cur.hideFieldsBitMasks.ip;break;case`uahash_input${t}`:n|=cur.hideFieldsBitMasks.uaHash;break;case`uid_input${t}`:n|=cur.hideFieldsBitMasks.uid;break;case`time_finish_input${t}`:n|=cur.hideFieldsBitMasks.timeFinish;break;case`time_start_input${t}`:n|=cur.hideFieldsBitMasks.timeStart;break;case`conditions_input${t}`:n|=cur.hideFieldsBitMasks.conditions}}),n};t.simplify=cur.uiSimplify.val(),t.duration=cur.uiDuration.val(),t.bantype=cur.uiBan.val(),t.search_period=cur.uiSearchPeriod.val();var o=cur.uiSearchPeriod.selectedItems();return o&&o.length>0&&(t.period_in_seconds=3===o[0].length&&1===o[0][2]?1:0),t.comment=ge("comment_input").value,t.all_actions=isChecked("all_actions")||!1,t.notbannedonly=isChecked("not_banned_only")||!1,t.linksonly=isChecked("links_only")||!1,t.wrap_actions=null===ge("wrap_actions")?1:isChecked("wrap_actions"),t.encode_entities=null===ge("encode_entities")?1:isChecked("encode_entities"),t.hidden_fields=n(geByClass1("pattern_part_root")),extend(t,a(e,"")),function(){var e=geByClass1(y);if(!isVisible(e))return!1;for(var t=geByClass("cloneable_input",e),a=0;a<t.length;a++)if(val(t[a]))return!0;return!1}()&&(t.hidden_fields2=n(geByClass1("pattern_part_child"),"2"),extend(t,a(e,"2"))),t}function $(e){return domData(e,"restore")}function K(e,t){return domData(e,"restore",t)}function V(){var e=ge("pattern_input"),t=geByClass1(g,c.patternWrap),a=U();if(!e.value)return scrollToTop(0),void notaBene(e);isButtonLocked(t)||(I(),lockButton(t),o&&(tooltips.destroy(o.el),o=!1),a.act="a_console_find_actions",ajax.post("noSpam.php",a,{onDone:e=>(function(e){F(),geByClass1(m,c.consoleWrap).innerHTML=e;var t=geByClass1("_console_numfield_ip1024",c.consoleWrap);t&&new InlineDropdown(t,{items:[[256,"/24 - 256"],[1024,"/22 - 1024"],[4096,"/20 - 4096"],[16384,"/18 - 16k"],[65536,"/16 - 65k"],[262144,"/14 - 262k"],[1048576,"/12 - 1kk"]],selected:256,withArrow:!0,keepTitle:!0,autoShow:!0,autoHide:300,onSelect:e=>ae("ip"+e)})})(e),onFail:e=>R(e)}))}function J(e,t){"string"==typeof t&&(t=clean(t)),val(e,t),pe(!1,ge(e),"reset")}function z(e){J("uid_input",e)}function Y(e){J("ip_input",e)}function q(e){J("uahash_input",e)}function G(e){cur.uiSpamtype.selectItem(e)}function X(e,t){0!==e.length&&(ge("conditions_input").value+=ge("conditions_input").value?" "+(t?"||":"&&")+" "+e:e),le("reset")}function Q(e){J("threshold_input",e)}function Z(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(e=U(!0));var t=Object.keys(e);t.sort();for(var a=[],n=0;n<t.length;n++){var o=t[n],r=e[o];a.push(encodeURIComponent(o)+"="+encodeURIComponent(r))}return"/noSpam?"+a.join("&")}function ee(){var e=Z(),t=geByClass1("_get_pattern_link");t&&t.tt&&t.tt.destroy(),addClass(t,"progress"),ajax.post("noSpam.php",{act:"get_search_link",link:e},{onDone:function(e){removeClass(t,"progress"),showTooltip(t,{text:e,slide:15,center:1,black:1,nohide:1,hidedt:400,shift:[0,2,0],onShowEnd:()=>{(0,window.selectText)("shorten_link"),setTimeout(t.tthide,3e3)}})},onFail:function(e){removeClass(t,"progress"),topError(e,{dt:5})}})}function te(){var e=geByClass1(b,c.patternWrap);if(!isButtonLocked(e)){var t=extend(U(),{act:"debug_pattern"});I(),ajax.post("noSpam.php",t,{onDone:e=>W(e),onFail:e=>R(e)})}}function ae(e,t){var a=isChecked("values_hist"),n=U();n.need_hist=a,n.act="numeric_field",n.field=e,n.custom_condition=t||"",cur.numFieldSel=e,ajax.post("noSpam.php",n,{onDone:function(n,o){var r=clean(t||e);showFastBox({width:a?330:710,title:r,dark:1,containerClass:"nospam_hist_wrap",hideButtons:a},n).evalBox(o)},progress:"console_query_fields_progress"})}function ne(e){r=e,geByClass1("_nospam_console_custom_num_condition_patterns").innerHTML=e}function oe(e){var t=2===e?cur.uiSpamtype2.val():cur.uiSpamtype.val();return showBox("noSpam.php",{act:"conditions_hint",spamtype:t},{dark:1,containerClass:"nospam_hint_wrap"})}function re(){var e=U(),t=geByClass1(f,c.patternWrap);e.act="apply_pattern",isButtonLocked(t)||null===document.querySelector(".console_failed_queries")&&(I(),lockButton(t),ajax.post("noSpam.php",e,{onDone:e=>W(e),onFail:e=>R(e)}))}function ie(e){["pattern_input","threshold_input","ip_input","uahash_input","time_finish_input","time_start_input","conditions_input"].forEach(e=>{var t=ge(e).value;ge(e).value=ge(e+"2").value,ge(e+"2").value=t});var t=cur.uiSpamtype.val();cur.uiSpamtype.selectItem(cur.uiSpamtype2.val()),cur.uiSpamtype2.selectItem(t),toggleClass(e,"switched")}function se(){return`nospam_conditions${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}_${vk.id}`}function le(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=ge(`conditions_input${n}`),r=domPS(o);switch(e){case"clear":hasClass(r,"option_cleared")?(a=ls.get(se(n)),removeClass(r,"option_cleared"),removeClass(r,H),a&&(ls.remove(se(n)),o.value=a)):(t=o.value,ls.set(se(n),t),o.value="",t&&addClass(r,"option_cleared"));break;case"reset":removeClass(r,"option_cleared"),removeClass(r,H),ls.remove(se(n))}}function pe(e,t,a){var n=ge(t),o=hasClass(e,"option_cleared");function r(a){var n=val(a);switch(K(a,n),t){case"pattern_input":case"pattern_input2":val(a,"/"),cur.uiSimplify.selectItem(32);break;case"threshold_input":case"threshold_input2":val(a,a.value&&"2"===a.value?"1":"2");break;default:val(a,"")}n&&addClass(e,"option_cleared")}switch(a){case"clear":o?function(){switch(t){case"threshold_input":case"threshold_input2":r(n);break;default:o&&(n.value=$(n))}removeClass(e,"option_cleared"),removeClass(e,H)}():r(n);break;case"reset":!function(){var e=geByClass1("option_clear",n.parentNode);K(n,""),removeClass(e,"option_cleared"),removeClass(e,H)}();break;case"reset_all":geByClass("option_clear").forEach(function(e){K(ge(e.getAttribute("data-option")),""),removeClass(e,"option_cleared"),removeClass(e,H)})}}function de(){var e=geByClass1("pattern_wrap");hasClass(e,"pattern_composite")?removeClass(e,"pattern_composite"):addClass(e,"pattern_composite")}function ue(){}function _e(e){var t=ge(document.activeElement);if(e.altKey)switch(-1!==[49,50,51,52,53,67,70,83].indexOf(e.keyCode)&&t&&t.blur(),e.keyCode){case 83:Object(c.activeTab)()===c.tabPattern?V():Object(c.activeTab)()===c.tabReports&&Object(s.prepareReport)(Object(s.activeReportsType)(),Object(s.activeSubReportsType)());break;case 70:if(-1!==[p,d,u].indexOf(vk.id))return re();break;case 67:le("clear"),cur.conditions.deselectTemplate();break;case 49:cur.uiSearchPeriod.selectItem(1);break;case 50:cur.uiSearchPeriod.selectItem(24);break;case 51:cur.uiSearchPeriod.selectItem(72);break;case 52:cur.uiSearchPeriod.selectItem(240);break;case 53:cur.uiSearchPeriod.selectItem(2160)}}function me(){var e=window.pageNode,t=window.browser.msie6?e:window,a=geByClass1("_pattern_buttons",c.patternWrap),n=Object(i.createModule)({handlers:(e,n)=>{n(a,"click",g,V),n(a,"click",f,re),n(a,"click",v,ee),n(a,"click",b,te),n(c.consoleWrap,"click",k,A),n(c.consoleWrap,"click",D,e=>(function(e){var t=domData(e.target,"field"),a=showFastBox.pbind({width:710,title:t,dark:1}),n=U();n.act="link_field",n.field=t,ajax.post("noSpam.php",n,{onDone:a,progress:"console_query_fields_progress"})})(e)),n(c.consoleWrap,"click",S,e=>{var t=e.target,a=domData(t,"field");a!==E?ae(a):function(e){var t="nospam_console_custom_num_condition",a=()=>{var e=ge(C),t=val(e);if(t){var a={act:"a_numeric_field_add_condition",custom_condition:t};ajax.post("noSpam.php",a,{onDone:ne.pbind()}),ae(E,t)}else notaBene(e)},n={className:"nospam_console_custom_num_condition_wrap",text:getTemplate("nospam_console_custom_num_condition"),forcetodown:1,nohide:1,forceNoHide:1,shift:[10,8],showdt:0,onShowEnd:()=>{elfocus(ge(C))},onShowStart:()=>{val(C,ls.get(t)||"")},init:n=>{o=n;var r=ge(C);addEvent(r,"keypress",e=>onEnter(a,e)),addEvent(r,"keyup",()=>ls.set(t,val(r)));var i=geByClass1("_nospam_console_custom_num_condition_close",domPN(r));addEvent(i,"click",()=>e.tthide())}};o?(o.show(),a()):showTooltip(e,n),r&&ne(r)}(t)}),n(t,"click",T,e=>{var t=e.target,a=Object(l.unclean)(domData(t,"pattern"));val(C,a)}),n(t,"click",x,e=>{var t=e.target,a={act:"a_numeric_field_delete_condition",custom_condition:Object(l.unclean)(domData(t,"pattern"))};ajax.post("noSpam.php",a,{onDone:ne.pbind()})}),n(c.consoleWrap,"click",B,e=>{var t=e.target,a=domData(t,"time");a<0?function(e){J("time_finish_input",e)}(-a):a>0&&function(e){J("time_start_input",e)}(a)}),n(c.consoleWrap,"click",L,e=>{if(e&&e.altKey){var t=clean(e.target.dataset.uid||"");e.ctrlKey?(removeClass(e.target,"console_intem_excluded"),z(t)):(addClass(e.target,"console_intem_excluded"),z(""),X("uid != "+t)),cancelEvent(e)}}),e(t,"scroll",ue),e(document,"keydown",_e),n(c.patternWrap,"click",M,e=>{var t=e.target;pe(t,domData(t,"option"),"clear")}),n(c.patternWrap,"click",j,e=>{le("clear",domNS(e.target).id.replace("conditions_input",""))}),n(document,"click",O,e=>{var t=e.target;X(domData(t,"conditions"))})}});cur.destroy.push(()=>{Object(i.destroyModule)(n)})}},FThC:function(e,t,a){"use strict";a.r(t);var n=a("uRA3"),o={selected:"ua_hash",updateOnSelect:function(){return o.getByType(o.selected)},getSpamType:function(){return isObject(this.spamtype)?this.spamtype._selected[0]:"wall"},getPeriod:function(){return isObject(this.period)?this.period._selected[0]:1},getByType:function(e){var t=ge("suspicious_table"),a=geByClass1("summary_tab_sel","suspicious_tabs"),n=isVisible("suspicious_tabs")?0:1,o=this;this.selected=e;var r=ge("suspicious_spamtype"),i=ge("suspicious_period"),s=geByClass("_suspicious_msg"),c=geByClass1("_suspicious_"+e+"_msg");each(s,function(e,t){hide(t)}),show(c),"hashtags"==e?hide(r):show(r),"users"==e&&hide(r,i),n&&(t=ge("suspicious")),removeClass(a,"summary_tab_sel");var l={act:"a_get_suspicious",type:e,spamtype:this.getSpamType(),period:this.getPeriod(),need_tabs:n};addClass("suspicious_"+e,"summary_tab_sel"),ajax.post("noSpam.php",l,{onDone:function(e){if(!e)return topError(getLang("nospam_suspicious_data_error"));t.innerHTML=e,o.initInlineDropdown()},progress:"suspicious_progress"})},initInlineDropdown:function(){var e={withArrow:!0,keepTitle:!0,autoShow:!0,autoHide:300,onSelect:o.updateOnSelect},t=extend({items:cur.options.spamtypes,selected:"wall"},e),a=extend({items:[[1,"Один час"],[2,"Два часа"],[5,"5 часов"],[10,"10 часов"],[24,"Сутки"]],selected:1},e);this.spamtype||(this.spamtype=new InlineDropdown("suspicious_spamtype",t)),this.spamtype._els.valueEl.innerHTML=this.spamtype._selected[1],this.period||(this.period=new InlineDropdown("suspicious_period",a)),this.period._els.valueEl.innerHTML=this.period._selected[1]}},r=(a("pIFo"),a("Vd3H"),a("4Ch9")),i=function(e){this.selected=0,extend(this,e),this.templates=JSON.parse(e.templates)};i.prototype={addTemplate:function(){showBox("noSpam.php",{act:this.acts.add},{params:{width:430,dark:1,progress:"add_template"}})},saveTemplate:function(e){var t=cur[e],a=t.selected||0;if(ge("add_template_title")&&ge("add_template_text")){var n=trim(ge("add_template_title").value),o=trim(ge("add_template_text").value);if(!n)return notaBene("add_template_title");if(!o)return notaBene("add_template_text");var r={act:t.acts.save,title:n,text:o,hash:t.hash,template_id:a};ajax.post("noSpam.php",r,{onDone:function(e,a){var n=ge(t.links);n.innerHTML=e,hasClass(n,"template_links")||addClass(n,"template_links"),t.templates=JSON.parse(a),curBox().hide()},progress:a?"edit_template":"add_template"})}},editTemplate:function(){var e={act:this.acts.edit,template_id:this.selected,hash:this.hash};showBox("noSpam.php",e,{params:{width:430,dark:1,progress:"edit_template"}})},deleteTemplate:function(){var e=this;if(!this.selected)return!1;showFastBox({title:"Удаление шаблона",width:430,dark:1,progress:"delete_condition"},getLang("nospam_delete_template"),getLang("global_delete"),function(){var t=e.selected,a={act:e.acts.remove,template_id:t,hash:e.hash};ajax.post("noSpam.php",a,{onDone:function(t,a){var n=ge(e.links);n.innerHTML=t,e.deselectTemplate(),e.templates=JSON.parse(a),isObject(e.templates)||removeClass(n,"template_links"),curBox().hide()},progress:"delete_condition"})},getLang("global_cancel"))},selectTemplate:function(e){if(e){var t=this.templates[e];this.selected=e;var a=entityDecode(t.text);Object(r.setConditions)(a),this.label.innerHTML=t.title+": ",addClass(this.wrap,"template_selected")}},selectCommentTemplate:function(e){if(e){var t=this.templates[e];this.selected=e;var a=entityDecode(t.text);this.editComment(a),this.label.innerHTML=t.answer_name+": ",addClass(this.wrap,"template_selected")}},editComment:function(e){if(val(this.input,e),this.input.autosize)return this.input.autosize.update();autosizeSetup("comment_input",{minHeight:32})},getFromLocal:function(e){var t=localStorage.comments_templates_storage;ge("get_local_comments");try{t=JSON.parse(t)}catch(e){}return t?t&&e?(each(t,function(e,t){var a=function(e,t){var a=ge("comment_template_links");hasClass(a,"template_links")||addClass(a,"template_links"),cur.comment.links.innerHTML=e,cur.comment.templates=JSON.parse(t)};setTimeout(function(){var e=t[1];ajax.post("noSpam.php",{act:"save_comment_template",title:e.name,text:e.comment,hash:opts.comment_hash,template_id:0},{onDone:a})},1e3*e)}),curBox().hide()):void showBox("noSpam.php",{act:"apply_comments_export"},{params:{width:430,dark:1,progress:"export_progress"}}):showFastBox({title:"Перенос шаблонов",dark:1},"К сожалению, не удалось найти ни одного комментария.")},deselectTemplate:function(){var e=this.selected,t=this.templates[e];if(t){var a=entityDecode(this.templates[e].text);t&&this.input.value==a&&val(this.input,""),this.label.innerHTML=this.label_html,removeClass(this.wrap,"template_selected"),delete this.selected}},editSort:function(){var e={act:this.acts.sort,hash:this.hash};showBox("noSpam.php",e,{params:{width:430,dark:1,progress:"sort_template"}})},saveSort:function(e,t,a,n,o){var r=cur[e],i={hash:t,act:r.acts.sort_save,tid:a.id.replace("template",""),tpos:a.dataset.pos,after_id:n&&n.dataset?n.dataset.pos:"",before_id:o&&o.dataset?o.dataset.pos:""};ajax.post("noSpam.php",i,{onDone:function(e,t){box=curBox(),box.content(e[2]),box.evalBox(t),box.setOptions({onHide:function(){debugLog(e),r.links.innerHTML=e[0],r.templates=JSON.parse(e[1])}})},progress:"sort_template"})}};var s=a("b8yN"),c="green_item",l="red_item";function p(e){var t=ge("console_item_"+e);hasClass(t,c)&&removeClass(t,c),addClass(t,l)}function d(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_docmail_spamer",uid:e,hash:t,act_type:a,spam_date:n,to_id:o,to_msg_id:r},{onDone:function(t){ge("rollback_docmail_spamer"+e).innerHTML=t,p(e)}})}function u(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_docwall_spamer",uid:e,hash:t,act_type:a,spam_date:n,owner_id:o,msg_id:r},{onDone:function(t){ge("rollback_docwall_spamer"+e).innerHTML=t,p(e)}})}function _(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_jpgmail_spamer",uid:e,hash:t,act_type:a,spam_date:n,to_id:o,to_msg_id_id:r},{onDone:function(t){ge("rollback_jpgmail_spamer"+e).innerHTML=t,p(e)}})}function m(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_jpgwall_spamer",uid:e,hash:t,act_type:a,spam_date:n,owner_id:o,msg_id:r},{onDone:function(t){ge("rollback_jpgwall_spamer"+e).innerHTML=t,p(e)}})}function h(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_pngmail_spamer",uid:e,hash:t,act_type:a,spam_date:n,to_id:o,to_msg_id:r},{onDone:function(t){ge("rollback_pngmail_spamer"+e).innerHTML=t,p(e)}})}function f(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_pngwall_spamer",uid:e,hash:t,act_type:a,spam_date:n,owner_id:o,msg_id:r},{onDone:function(t){ge("rollback_pngwall_spamer"+e).innerHTML=t,p(e)}})}function g(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_doc_spamer",uid:e,hash:t,act_type:a,spam_date:n,owner_id:o,doc_id:r},{onDone:function(t){ge("rollback_doc_spamer"+e).innerHTML=t,p(e)}})}function v(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_photo_spamer",uid:e,hash:t,act_type:a,spam_date:n,owner_id:o,photo_id:r},{onDone:function(t){ge("rollback_photo_spamer"+e).innerHTML=t,p(e)}})}function b(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_photo_spamer_from_wall",uid:e,hash:t,act_type:a,spam_date:n,owner_id:o,msg_id:r},{onDone:function(t){ge("rollback_photo_spamer"+e).innerHTML=t,p(e)}})}function y(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_photo_spamer_from_mail",uid:e,hash:t,act_type:a,spam_date:n,to_id:o,to_msg_id:r},{onDone:function(t){ge("rollback_photo_spamer"+e).innerHTML=t,p(e)}})}function k(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_video_spamer",uid:e,hash:t,act_type:a,spam_date:n,owner_id:o,video_id:r},{onDone:function(t){ge("rollback_video_spamer"+e).innerHTML=t,p(e)}})}function w(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_video_spamer_from_wall",uid:e,hash:t,act_type:a,spam_date:n,owner_id:o,msg_id:r},{onDone:function(t){ge("rollback_video_spamer"+e).innerHTML=t,p(e)}})}function S(e,t,a,n,o,r){ajax.post("noSpam.php",{act:"rollback_video_spamer_from_mail",uid:e,hash:t,act_type:a,spam_date:n,to_id:o,to_msg_id:r},{onDone:function(t){ge("rollback_video_spamer"+e).innerHTML=t,p(e)}})}function T(e){return se("<textarea>"+e+"</textarea>").value}function C(e){var t=document,a=t.getElementById(e);if(t.body.createTextRange)(n=t.body.createTextRange()).moveToElementText(a),n.select();else if(window.getSelection){var n,o=window.getSelection();(n=t.createRange()).selectNodeContents(a),o.removeAllRanges(),o.addRange(n)}}function x(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function D(){var e="";return window.getSelection?e=window.getSelection():document.getSelection?e=document.getSelection():document.selection&&(e=document.selection.createRange().text),e}function B(e){var t=ge(e);return t.options[t.selectedIndex].value}function L(e,t,a,n){ajax.post("noSpam.php",{act:"a_block_domain",domain:e,type:t,hash:a,warn_users:isChecked("warn_users")||0,comment:ge("linksban_comment").value,link_ex:n},{onDone:function(a){ge("block_domain_1_"+e).innerHTML="",ge("block_domain_2_"+e).innerHTML="",ge("block_domain_3_"+e).innerHTML="",ge("block_domain_"+t+"_"+e).innerHTML=a}})}function M(e,t){ajax.post("noSpam.php",{act:"a_remove_fid_search",fid:e,hash:t},{onDone:function(t){ge("remove_fid_search_"+e).innerHTML=t}})}function j(e,t){ajax.post("noSpam.php",{act:"a_ban_fid_zero",fid:e,hash:t},{onDone:function(t){ge("ban_fid_zero_"+e).innerHTML=t}})}function H(e,t){ajax.post("noSpam.php",{act:"a_ban_fid_forever",fid:e,hash:t},{onDone:function(t){ge("ban_fid_forever_"+e).innerHTML=t}})}function O(){return window.nav&&window.nav.objLoc&&window.nav.objLoc.claim}a.d(t,"entityDecode",function(){return T}),a.d(t,"selectText",function(){return C}),a.d(t,"removeSelectedText",function(){return x}),a.d(t,"getSelectedText",function(){return D}),a.d(t,"selectValue",function(){return B}),a.d(t,"blockDomain",function(){return L}),a.d(t,"removeFidSearch",function(){return M}),a.d(t,"banFidZero",function(){return j}),a.d(t,"banFidForever",function(){return H}),a.d(t,"isClaimContent",function(){return O}),a.d(t,"noSpamPatterns",function(){return n.noSpamPatterns}),a.d(t,"abortPatternMild",function(){return n.abortPatternMild}),a.d(t,"noSpamSuspicious",function(){return o}),a.d(t,"noSpamTemplates",function(){return i}),a.d(t,"dealSingleSpamer",function(){return s.dealSingleSpamer}),a.d(t,"reportsTime",function(){return s.reportsTime}),a.d(t,"onFiltersChange",function(){return s.onFiltersChange}),a.d(t,"rollbackDocMailSpamer",function(){return d}),a.d(t,"rollbackDocWallSpamer",function(){return u}),a.d(t,"rollbackJpgMailSpamer",function(){return _}),a.d(t,"rollbackJpgWallSpamer",function(){return m}),a.d(t,"rollbackPngMailSpamer",function(){return h}),a.d(t,"rollbackPngWallSpamer",function(){return f}),a.d(t,"rollbackDocSpamer",function(){return g}),a.d(t,"rollbackPhotoSpamer",function(){return v}),a.d(t,"rollbackPhotoSpamerFromWall",function(){return b}),a.d(t,"rollbackPhotoSpamerFromMail",function(){return y}),a.d(t,"rollbackVideoSpamer",function(){return k}),a.d(t,"rollbackVideoSpamerFromWall",function(){return w}),a.d(t,"rollbackVideoSpamerFromMail",function(){return S})},W28y:function(e,t,a){"use strict";a.r(t),a.d(t,"PHP_SECOND",function(){return n}),a.d(t,"PHP_MINUTE",function(){return o}),a.d(t,"PHP_HOUR",function(){return r}),a.d(t,"PHP_DAY",function(){return i}),a.d(t,"PHP_WEEK",function(){return s}),a.d(t,"PHP_MONTH",function(){return c}),a.d(t,"PHP_YEAR",function(){return l}),a.d(t,"MILLISECONDS_MULTIPLIER",function(){return p}),a.d(t,"SECOND",function(){return d}),a.d(t,"MINUTE",function(){return u}),a.d(t,"HOUR",function(){return _}),a.d(t,"DAY",function(){return m}),a.d(t,"WEEK",function(){return h}),a.d(t,"MONTH",function(){return f}),a.d(t,"YEAR",function(){return g}),a.d(t,"TARGET_BLANK",function(){return v}),a.d(t,"EVENT_MOUSEDOWN",function(){return b}),a.d(t,"EVENT_KEYDOWN",function(){return y}),a.d(t,"EVENT_SCROLL",function(){return k}),a.d(t,"EVENT_CLICK",function(){return w}),a.d(t,"getCurrentUrl",function(){return S}),a.d(t,"updateUrl",function(){return T}),a.d(t,"getUrlParam",function(){return C}),a.d(t,"getAct",function(){return x}),a.d(t,"openInNewTab",function(){return D}),a.d(t,"getTime",function(){return B}),a.d(t,"getCurrentDayBoundaries",function(){return L}),a.d(t,"getDayBoundaries",function(){return M}),a.d(t,"timestampToSeconds",function(){return j}),a.d(t,"showLoading",function(){return H}),a.d(t,"hideLoading",function(){return O}),a.d(t,"hideCurrentBox",function(){return E}),a.d(t,"initRadioButtons",function(){return P}),a.d(t,"isSpecialKeyPressed",function(){return N}),a.d(t,"isIntegerString",function(){return I});var n=1,o=60,r=3600,i=86400,s=604800,c=2592e3,l=31536e3,p=1e3,d=n*p,u=o*p,_=r*p,m=i*p,h=i*p,f=c*p,g=l*p,v="_blank",b="mousedown",y="keydown",k="scroll",w="click";function S(){return nav.strLoc}function T(e){var t={0:nav.objLoc[0],act:nav.objLoc.act};nav.setLoc(extend(t,e))}function C(e){return nav.objLoc[e]}function x(){return C("act")}function D(e){window.open(e,"_blank").focus()}function B(){return j(Date.now())}function L(){return M((new Date).getTime())}function M(e){var t=new Date(e),a=new Date(e);return t.setHours(0,0,0,0),a.setHours(23,59,59,999),[t.getTime(),a.getTime()]}function j(e){return Math.floor(e/p)}function H(){var e=new MessageBox;e.setOptions({title:!1,hideButtons:!0}).show(),hide(boxLayerBG),hide(e.bodyNode),show(boxLoader),boxRefreshCoords(boxLoader)}function O(){curBox&&curBox()&&curBox().hide()}function E(){curBox().hide()}function P(e,t,a){window.radioBtns[e]={val:a,els:Array.prototype.slice.apply(geByClass("radiobtn",geByClass1(t)))}}function N(e){return e.ctrlKey||e.metaKey&&browser.mac}function I(e){return/^-?(0|[1-9]\d*)$/.test(e)}},awNS:function(e,t,a){"use strict";a.r(t),a.d(t,"consoleWrap",function(){return n}),a.d(t,"patternWrap",function(){return o}),a.d(t,"reportList",function(){return r}),a.d(t,"reportTabs",function(){return i}),a.d(t,"tabReports",function(){return _}),a.d(t,"tabPattern",function(){return m}),a.d(t,"tabPatterns",function(){return h}),a.d(t,"switchTab",function(){return g}),a.d(t,"getCurrentTab",function(){return v}),a.d(t,"activeTab",function(){return b}),a.d(t,"getCustomOption",function(){return k}),a.d(t,"init",function(){return T});var n,o,r,i,s,c=a("4Ch9"),l=a("b8yN"),p=a("uRA3"),d=a("W28y"),u=a("ofcU"),_="reports",m="pattern",h="patterns",f="_nospam_option_action";function g(e,t){var a=geByClass1("_nospam_tab_switch_"+e);uiTabs.switchTab(domFC(a)),t&&(a=domChildren(a));var n=geByClass("nospam_tab"),o=domData(a,"tab-id");return n.forEach(function(e){domData(e,"id")!=o?hide(e):show(e)}),Object(d.updateUrl)({tab:e}),e===h?p.noSpamPatterns.initUpdate():e===_?l.noSpamReports.initUpdate():e===m&&scrollToTop(),!1}function v(){return Object(d.getUrlParam)("tab")}function b(){var e=domPN(geByClass1("ui_tab_sel"));return domData(e,"tab-id")}function y(e){geByClass(f,s).forEach(t=>{var a=domData(t,"option"),n=+e[a],o=window.cur.lang["nospam_options_"+a];o&&(t.innerHTML=o[n]),domData(t,"option-state",n)}),cur.options.custom_options=e}function k(e){var t=window.cur;return!!t.options.custom_options&&t.options.custom_options[e]}var w={width:185,height:500,multiselect:!1};function S(e){extend(cur,{uiSpamtype:new Dropdown(ge("spamtype"),e.spamtypes,extend(w,{selectedItems:cur.options.spamtype})),uiSpamtype2:new Dropdown(ge("spamtype2"),e.spamtypes,extend(w,{selectedItems:cur.options.spamtype2})),uiSimplify:new Dropdown(ge("simplify_select"),e.simplifies,extend(w,{selectedItems:cur.options.simplify})),uiBan:new Dropdown(ge("ban_select"),e.bans,extend(w,{selectedItems:cur.options.ban})),uiDuration:new Dropdown(ge("duration_select"),e.durations,extend(w,{selectedItems:cur.options.duration})),uiSearchPeriod:new Dropdown(ge("search_period_select"),e.searchperiods,extend(w,{selectedItems:cur.options.searchperiod}))}),placeholderSetup("comment_input"),val("comment_input")&&autosizeSetup("comment_input",{minHeight:30}),geByClass("conditions_input").forEach(function(e){placeholderSetup("comment_input"),val(e)&&autosizeSetup("comment_input",{minHeight:30})});var t=ge("page_body");o=geByClass1("pattern_wrap",t),n=geByClass1("console_wrap",t),i=geByClass1("reports_tabs",t),r=geByClass1("_reports_list",t),s=geByClass1("_nospam_options",t);var a=geByClass1("nospam_patterns_wrap",t),d=Object(u.createModule)({handlers:(e,t)=>{t(a,"click","_abort_pattern_mild",e=>Object(p.abortPatternMild)(domData(e.target,"id"))),t(s,"click",f,e=>(function(e){var t={act:"a_set_custom_option",name:domData(e,"option"),state:1^domData(e,"option-state")};ajax.post("noSpam.php",t,{onDone:y,showProgress:lockActionsMenuItem.pbind(e),hideProgress:unlockActionsMenuItem.pbind(e)})})(e.target))}});cur.destroy.push(()=>{Object(u.destroyModule)(d)}),Object(c.mount)(),Object(l.mount)()}function T(e){var t=Object(u.createMutations)(S);t.callMutations;(0,t.bindMutations)(e)}},b8yN:function(e,t,a){"use strict";a.r(t);a("a1Th"),a("rE2o"),a("ioFf"),a("KKXr"),a("rGqo"),a("Btvt");var n,o=a("1BRX"),r=a("4Ch9"),i=a("awNS");function s(){n=(new Date).getTime()}function c(){var e=((new Date).getTime()-n)/1e3,t=Array.prototype.slice.call(arguments);t.push(e),debugLog.apply(null,t)}var l=a("W28y"),p=a("ofcU");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}a.d(t,"activeReportsType",function(){return C}),a.d(t,"activeSubReportsType",function(){return x}),a.d(t,"prepareReport",function(){return D}),a.d(t,"switchReports",function(){return B}),a.d(t,"dealSingleSpamer",function(){return P}),a.d(t,"reportsTime",function(){return I}),a.d(t,"onFiltersChange",function(){return A}),a.d(t,"mount",function(){return U}),a.d(t,"noSpamReports",function(){return $});var u=20,_="report_subfilter_active",m="active_filter",h="active_type",f=-152029297,g=300,v=100,b=200,y={},k={},w=new Date,S=setTimeout(null),T=0;function C(){var e=geByClass1(m,i.reportTabs);return domData(e,"type")}function x(){var e=geByClass1("_reports_subtabs",i.reportTabs),t=geByClass1(m,e);return domData(t,"subtype")}function D(e,t){s();var a=geByClass1("_report_btn_update",i.reportList);if(!isButtonLocked(a)){var n=geByClass1("_reports_"+e+"_wrap",i.reportList);if(n){var o={act:"a_get_reports",encode_entities:1,type:e,sub_type:t,shift:cur.options.shift};"mail"===e&&"mail_group"===t&&(o=extend(o,function(){if("mail"===e||"mail_group"===t){var a=geByClass1("filters");return{hide_groups_with_disabled_messages:isChecked(geByClass1("hide_groups_with_disabled_messages_filter",a)),shift:isObject(cur.hoursShiftSlider)?23*cur.hoursShiftSlider._currValue:0,min_reporters_amount:val(geByClass1("min_reports_amount_filter",a)),sorting:radioval("group_messages_reports_sorting")}}console.log("Unsupported filters used")}())),ajax.post("noSpam.php",o,{onDone:function(t){if(c("actions fetch"),y={},0!==t.length){for(var a=0;a<t.length;a++){var o=t[a];o.ui_type=e;var r=L(o.ui_type,a);W(o.ua_hash,o.agent_name),delete o.agent_name,delete o.remix_seed,o.index=a,y[r]=o}n.innerHTML="",M(e,0),t=""}else n.innerHTML=getTemplate("nospam_reports_type_search_empty")},onFail:function(e){c("actions fetched fail"),topError(e),n.innerHTML=getTemplate("nospam_reports_type_search_error")},showProgress:lockButton.pbind(a),hideProgress:unlockButton.pbind(a)}),scrollToTop()}else topError("Can't find wrap for type: "+e)}}function B(e){var t=e.target,a=domData(t,"type"),n=domData(t,"subtype"),o=geByClass("report_filter",i.reportTabs),r=geByClass("report_subfilter",i.reportTabs),s=geByClass1(h,i.reportList);if(!a)return!1;o.forEach(e=>{hasClass(e,m)&&removeClass(e,m),domData(e,"type")!==a||domData(e,"subtype")||addClass(e,m)});var c=!1,l=!1;r.forEach(e=>{removeClass(e,_),removeClass(e,m),domData(e,"type")===a&&(addClass(e,_),c=!0),domData(e,"subtype")===n&&(addClass(e,m),l=!0)});var p=geByClass1("hr",i.reportTabs);if(c?show(p):hide(p),c&&!l){var d=geByClass1(_,i.reportTabs);addClass(d,m)}domData(s,"type")!==a&&(removeClass(s,h),addClass(ge("reports_"+a),h)),D(a,n)}function L(e,t){return"report_"+e+"_"+t}function M(e,t,a){s(),a||(a=u);for(var n=geByClass1("_reports_"+e+"_wrap",i.reportList),o=domPN(n),r=geByClass1("_reports_type_show_more",o),l=0,p=0,_=0;l<a;){p=_,_++;var m=L(e,p),h=y[m];if(!(p<t)){if("object"!=typeof h){debugLog("empty reports after "+p,"need to shift "+t);break}if(h.uid&&!0!==h.showed){var f=ce("div",{id:"report_"+e+"_"+p});if(addClass(f,"clear_fix"),addClass(f,"report"),h.mem_banned||h.uid_base_info){if(Object(i.getCustomOption)("hide_banned"))continue;addClass(f,"banned")}h.ui_type=e;[O(h),d(H(h),1)[0],E(h,p)].forEach(function(e){f.appendChild(e)}),n.appendChild(f),l++}}}if(0!==l){r?isVisible(r)||show(r):(r=ce("div",{className:"reports_type_show_more _reports_type_show_more"}),o.appendChild(r));var g=parseInt(t)+u;r.innerHTML=getTemplate("nospam_reports_show_more",{need_shift:g}),c("actions to html")}else hide(r)}function j(){var e=getSelectionText();e?cur.uiSimplify.selectItem("0"):(e="/",cur.uiSimplify.selectItem("32")),val("pattern_input",e)}function H(e){var t,a="",n=e.type_name,o=parseInt(e.type),r=ce("div");switch(addClass(r,"report_body"),e.api_id>0&&(setStyle(r,"color","#bbbbbb"),a+=e.api_id>0?'<div class="report_api">Приложение ('+e.api_id+"):</div>":""),e.message&&(a+=getTemplate("nospam_reports_field",{class:"report_message",value:e.message})),e.kludges&&(a+=getTemplate("nospam_reports_field",{class:"reports_kludges",value:e.kludges})),e.attaches&&(a+=getTemplate("nospam_reports_attaches",{attaches:e.attaches})),o){case 500:case 510:case 545:t="<a href='/wall"+e.owner_id+"_"+e.msg_id+"' target='_blank'> "+n+"</a>";break;case 501:case 550:t="<a href='/wall"+e.owner_id+"_"+e.parent_id+"?reply="+e.msg_id+"' target='_blank'> "+n+"</a>",e.group_id&&e.group_link&&(a+=getTemplate("nospam_reports_group_id",{group_id:e.group_id,group_link:e.group_link}));break;case v:a+=e.score?"<b>phone_cheat:</b> "+e.score:"",e.update_time&&(a+=getTemplate("nospam_reports_tag",{tag_label:e.update_time}));break;case b:a+=getTemplate("nospam_reports_labeled_value",{label:"receivers_num",value:e.receivers_num}),a+=getTemplate("nospam_reports_labeled_value",{label:"chat_msg_id",value:e.chat_msg_id}),a+=getTemplate("nospam_reports_labeled_value",{label:"chat_title",value:e.chat_title});break;case g:if(e.group_id&&e.group_link&&(a+=getTemplate("nospam_reports_group_id",{group_id:e.group_id,group_link:e.group_link})),e.admin_id&&e.admin_link){var i=e.admin_id;a+=getTemplate("nospam_reports_admin_id",{admin_id:i,admin_link:e.admin_link})}break;case 160:a+=e.title;break;case 161:a+=e.new_title;break;case 200:e.attaches;e.uid==f&&e.original_user_link&&(a+=getTemplate("nospam_reports_molodec_label",{original_user_link:e.original_user_link}));case 2602:case 2647:t="<a href='/video"+e.owner_id+"_"+e.video_id+"' target='_blank'> "+n+"</a>";break;case 2600:case 2610:case 2611:case 2645:case 2650:t="<a href='/video"+e.owner_id+"_"+e.video_id+"' target='_blank'> "+n+"</a>",a+='<table class="report_video"><tr>',a+='<td style="width: 130px;"><a class="report_video_thumb" href="'+e.video.href+'" onclick="'+e.video.onclick+'" style="background-image: url(\''+e.video.thumb+'\')"><div class="report_video_duration"><span class="report_video_icon"></span><span class="report_video_duration_text">'+e.video.duration_text+"</span></div></a></td>",a+="<td>",a+=e.video.DELETED?"Видеозапись удалена":'<div class="report_video_title"><a href="'+e.video.href+'" onclick="'+e.video.onclick+'">'+e.video.title_short+"</a></div>",a+=!e.video.DELETED&&e.description?'<div class="report_video_description">'+e.video.description_short+"</div>":"",a+="</td>",a+="</tr></table>",a+='<div class="report_video_duration_second"><b>Duration:</b> <a class="_console_conditions" data-conditions="duration = '+e.duration+'">'+e.duration+"</a></div>",e.external&&(a+='<div class="report_video_external"><b>External:</b> '+e.external+"</div>");break;case 3504:case 3545:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+n+"</a>";break;case 13120:case 13121:t="<a href='/market"+e.owner_id+"?w=product"+e.owner_id+"_"+e.item_id+"' target='_blank'> "+n+"</a>";break;case 3500:case 3547:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+n+"</a>",a+='<table class="report_photo"><tr>',a+='<td><div class="report_photo_thumb">'+e.photo+"</div></td>",a+=e.description?'<td><div class="report_photo_description">'+e.description+"</div></td>":"",a+="</tr></table>",a+=e.album_id<0?'<div class="report_album_id"><b>album_id:</b> '+e.album_id+"</div>":"";break;case 3550:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+n+"</a>",a+=e.photo,a+=e.album_id<0?'<div class="report_album_id"><b>album_id:</b> '+e.album_id+"</div>":"";break;case 9258:a+=e.about;break;case 1800:a+=e.status;break;case 1531:case 1530:case 1534:a+=e.text;break;case 5e3:t="<a href='/topic-"+e.group_id+"_"+e.topic_id+"' target='_blank'> "+n+"</a>",a+=e.title;break;case 5001:case 5046:t="<a href='/topic-"+e.group_id+"_"+e.topic_id+"?post="+Math.abs(e.comment_id)+"' target='_blank'> "+n+"</a>";break;case 2131:var s=e.group_id;t="Группа: "+getTemplate("nospam_reports_id_link",{type:"club",id:s,label:s,color:"black"}),a+="<b>Название:</b>"+e.group_name+"<br>",a+="<b>Описание:</b>"+e.group_description+"<br>";break;case 7530:t="<a href='/app"+e.app_id+"' target='_blank'> "+n+"</a>",a+=e.app_name+"<br>";break;case 3670:var c=e.like_ref,l=e.like_type,p=e.owner_id+"_"+e.item_id,d="";switch(Number(l)){case 11:t="<a href='wall<a href='wall"+p+"' target='_blank'> "+n+"</a>",d+="(запись на стене), <a href='wall"+p+"' target='_blank'>vk.com/wall"+p+"</a>";break;case 12:t="<a href='wall"+p+"' target='_blank'> "+n+"</a>",d+="(комментарий на стене), <a href='wall"+p+"' target='_blank'>vk.com/wall"+p+"</a>";break;case 10:t="<a href='photo"+p+"' target='_blank'> "+n+"</a>",d+="(фотография), <a href='photo"+p+"' target='_blank'>vk.com/photo"+p+"</a>";break;case 24:case 8:t="<a href='photo"+p+"' target='_blank'> "+n+"</a>",d+="(видеозапись), <a href='video"+p+"' target='_blank'>vk.com/video"+p+"</a>";break;case 6:t="<a href='audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"' target='_blank'> "+n+"</a>",d+="(аудиозапись), <a href='audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"' target='_blank'>vk.com/audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"</a>";break;case 22:t=n,d+="(комментарий к видео)";break;case 21:t=n,d+="(комментарий к фотографии)";break;case 20:t=n,d+="(комментарий на стене)";break;default:t=n,d+=" (незвестный тип) "+p}a+=getTemplate("nospam_reports_report_like",{like_ref:c,like_ref_id:e.ref,like_type:d,like_type_id:l});break;default:console.log("No type specified")}if(e.post_tags){var u=e.post_tags;Object.keys(u).forEach(function(e){u[e]&&(a=getTemplate("nospam_reports_tag",{tag_label:u[e]})+a)})}return r.innerHTML=a,[r,t]}function O(e){var t,a,n=e.mem_banned,o=isObject(n),r=o?"Недавняя блокировка:<br>"+n.comment+"<br>"+N(new Date(1e3*n.time)):"",i="",s=L(e.ui_type,e.index),c=e.uid_base_info;""==r&&c&&(t=c[0].pattern_id,a=c[0].state,o=!0,r=(r=0==Number(a)?"Ожидает обработки noSpam ":"Обработан noSpam ")+"(шаблон номер <a href='/pattern"+Number(t)+"' target='_blank'>"+Number(t)+"</a>)");var l,p=ce("div");addClass(p,"report_info"),o&&addClass(p,"report_banned"),r&&(i=getTemplate("nospam_reports_report_ban_tooltip",{action_index:s}),y[s].ban_tt=r);var u,_=e.uid,m=Number(e.type),h=o?"red":"blue";return l=_>0?getTemplate("nospam_reports_id_link",{type:"id",id:_,label:_,color:h}):getTemplate("nospam_reports_id_link",{type:"club",id:-_,label:_,color:h}),u=d(H(e),2)[1],p.innerHTML=getTemplate("nospam_reports_report_info",{action_mention_link:l,action_tt:i,type:m,index:e.index,ip:e.ip,report_time:N(new Date(1e3*e.report_time)),action_time:N(new Date(1e3*e.time)),ua_hash:e.ua_hash,from_uid:e.from_uid,report_count:e.report_count>1?langNumeric(e.report_count,["","%s жалоба","%s жалобы","%s жалоб"]):"",report_type_link:u}),p}function E(e,t){var a="",n="report_"+e.ui_type+"_"+e.index,o=ce("div");(addClass(o,"report_steps"),"photo"!=e.ui_type&&"video"!=e.ui_type||cur.isSearchOnlyMode)||(a+="<span id = 'spamer_by_"+n+"'> <a onclick = \""+("dealSingleSpamer('"+e.ui_type+"', "+e.uid+", "+e.index+")")+'"> Забанить и откатить </a> </span>');return a+=getTemplate("nospam_reports_compose_button",{type:e.real_ui_type?e.real_ui_type:e.ui_type,ip:e.ip,ua_hash:e.ua_hash}),a+="<span id='selected_text_span"+t+"' style='display:none;'></span>",o.innerHTML=a,o}function P(e,t,a){var n="report_"+e+"_"+a;ajax.post("noSpam.php",{act:"a_single_spamer",uid:t,type:e,action:JSON.stringify(y[ge(n)])},{onDone:function(){ge("spamer_by_"+n).innerHTML="<span style = 'color: green'> Добавлен </span>"},onFail:function(){ge("spamer_by_"+n).innerHTML="<span style = 'color: red'> Неудача </span>"}})}function N(e){var t=e.getDate(),a=e.getMonth()+1;return(t<10?"0":"")+t+"."+(a<10?"0":"")+a+" в "+e.toLocaleTimeString()}var I={_sel:[],day:w.getDate(),month:w.getMonth(),months:[[0,"Января"],[1,"Февраля"],[2,"Марта"],[3,"Апреля"],[4,"Мая"],[5,"Июня"],[6,"Июля"],[7,"Августа"],[8,"Сентября"],[9,"Октября"],[10,"Ноября"],[11,"Декабря"]],year:w.getFullYear(),generateHMS:function(e){var t,a=[];switch(e){case"hour":t=23;break;case"minute":case"second":t=59}for(var n=0;n<=t;++n)a.push([n,n<10?"0"+n:n+""]);return a},generateDays:function(e,t){for(var a=[],n=Object(o.getLastDay)(e,t),r=1;r<=n;++r)a.push([r,r+""]);return a},updateDays:function(){var e=this._sel[0],t=this._sel[1].val(),a=this._sel[2].val();e.val()>Object(o.getLastDay)(a,t)&&e.clear(),e.setData(this.generateDays(a,t))},setControls:function(){var e=I,t=[["reports_day",55],["reports_month",95],["reports_year",60],["reports_hour",50],["reports_minute",50],["reports_second",50]],a=ce("div",{id:"reports_time_wrap",className:"reports_time_wrap"}),n=geByClass1("box_body");e.clear(),n.appendChild(a),t.forEach(function(a,o){var r=[],i=[],s=ce("div",{className:a[0]+" fl_l"}),c=ce("input",{type:"hidden",name:a[0],id:a[0]}),l=a[0].split("_")[1];switch(domLC(n).appendChild(s),s.appendChild(c),l){case"year":i=(r=[[e.year,e.year+""]])[0];break;case"month":r=e.months,i=e.month;break;case"day":i=(r=e.generateDays(e.year,e.month))[e.day-1];break;case"hour":r=e.generateHMS(l),i=w.getHours();break;case"minute":r=e.generateHMS(l),i=w.getMinutes();break;case"second":r=e.generateHMS(l),i=w.getSeconds();break;default:i=r=e[l]}var p={width:t[o][1],multiselect:!1,autocomplete:!1,selectedItems:i};"month"!==l&&"year"!==l||extend(p,{onChange:function(e){I.updateDays()}}),I._sel.push(new Dropdown(c,r,p))})},setTime:function(){boxQueue.hideLast();var e=I,t=e._sel,a={day:t[0].val(),month:t[1].val(),year:t[2].val(),hour:t[3].val(),minute:t[4].val(),second:t[5].val()},n=new Date(a.year,a.month,a.day,a.hour,a.minute,a.second),o=e.tt;val(o,n.getTime()/1e3)},set:function(e,t){var a=this.setControls,n=this.setTime,o=domData(t,"part");w=new Date;var r=o?"time_"+e+"_input2":"time_"+e+"_input";this.tt=ge(r,i.patternWrap),showFastBox({width:435,title:"Время действия ("+("start"==e?"позже":"раньше")+", чем)",dark:1,containerClass:"nospam_report_time_box",onShow:a},'<div class="reports_time_label">Укажите дату:</div>',"Применить",n)},clear:function(){return this._sel=[]}};function F(e){Object(l.isSpecialKeyPressed)(e)?function(e){var t=Object(r.getParams)();if(t.type=domData(e,"type"),null===t.type)return!1;"post"!==t.type&&"comment"!==t.type||(t.type="wall");t.ip=domData(e,"ip"),t.uahash=domData(e,"ua-hash"),t.pattern=t.pattern||getSelectionText(),t.threshold=1;var a=Object(r.composeSearchLinkFromParams)(t);Object(l.openInNewTab)(a)}(e.target):function(e){var t=domData(e,"type"),a=domData(e,"ip"),n=domData(e,"ua-hash");if(null===t)return;"post"!=t&&"comment"!=t||(t="wall");Object(r.setIp)(a),Object(r.setUaHash)(n),Object(r.setThreshold)(1),cur.uiSpamtype.selectItem(t),Object(i.switchTab)(i.tabPattern),Object(r.optionClear)(!1,"reset_all")}(e.target)}function W(e,t){var a=k[e];k[e]?a&&a!==t&&debugLog("collision for "+e,t,a):k[e]=t}function R(){if(Object(i.getCurrentTab)()===i.tabReports){var e=C(),t=geByClass1("_reports_"+e+"_wrap",i.reportList),a=geByClass1("_report_show_more",domPN(t)),n=domPN(a),o=window.innerHeight||document.documentElement||bodyNode.clientHeight;T=scrollGetY(),isVisible(n)&&Object(i.activeTab)()===i.tabReports&&o+T>a.offsetTop&&a.click()}}function A(){clearTimeout(S),S=setTimeout(D.pbind(C(),x()),1e3)}function U(){var e=Object(p.createModule)({handlers:(e,t)=>{t(i.reportList,"mouseover","report_steps",j),t(i.reportList,"click","report_steps",e=>F(e)),t(i.reportList,"mouseover","report_info_ban_tooltip",e=>(function(e){var t=e.target,a=domData(t,"action-index"),n=y[a].ban_tt;n&&showTooltip(t,{text:n,dir:"down",hasover:1,shift:[22,5,0]})})(e)),t(i.reportList,"mouseover","report_info_ua_hash",e=>(function(e){var t=e.target,a=domData(t,"ua-hash"),n=k[a];showTooltip(t,{text:n||"[NULL]",dir:"down",hasover:1,shift:[22,5,0]})})(e)),e(document,"scroll",R),t(i.reportList,"click","_report_show_more",e=>{var t=domData(e.target,"need-shift");M(C(),t)}),t(i.reportTabs,"click","report_filter",e=>B(e)),t(i.reportList,"click","_report_btn_update",e=>{D(C(),x())}),t(i.reportTabs,"mouseover","settings_dots_wrap",e=>{var t=geByClass1("settings_dots_wrap");showTooltip(t,{black:!0,text:getTemplate("reports_group_message_tab_tooltip"),className:"group_messages_settings_tt",slideY:15,shift:[98,100,20],dir:"top",showdt:300,hidedt:100,hasover:!0,onCreate:function(){var e;e=ge("search_shift_filter"),cur.hoursShiftSlider=new Slider(e,{width:200,height:100,debounce:10,size:2,value:parseFloat(nav.objLoc.shift/23)||0,onChange:e=>{Object(l.updateUrl)({shift:parseInt(23*e)}),A()},formatHint:e=>langNumeric(parseInt(23*e),["","%s час назад","%s часа назад","%s часов назад"])}),Object(l.initRadioButtons)("group_messages_reports_sorting","sorting_radio_filter_wrap",1)}})})}});cur.destroy.push(()=>{Object(p.destroyModule)(e)})}var $={initUpdate:function(){scrollToY(T)}}},ofcU:function(e,t,a){"use strict";a.r(t);a("a1Th"),a("rE2o"),a("ioFf"),a("rGqo"),a("Btvt"),a("KKXr");function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=new window.Map;function r(e){var t=o.get(e.currentTarget);if(t){var a=t[e.type];if(a)for(var r,i=0;i<a.length;i++){var s=n(a[i],2),c=s[0],l=s[1],p=void 0;if(hasClass(e.target,c)?p=l(e,e.target):(r=gpeByClass(c,e.target,e.currentTarget))&&(p=l(e,r)),!1===p)break}}}var i=a("Egk5");function s(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,t)}}}function c(e,t,a,n,i){!function(e,t,a,n){var i=o.get(e);i||(o.set(e,{}),i=o.get(e));for(var s=t.split(" "),c=0;c<s.length;c++){var l=s[c];i[l]||(i[l]=[],addEvent(e,l,r)),i[l].push([a,n])}}(t,a,n,i),e._registeredHandlers.push({handlerType:"delegate",elem:t,types:a,selector:n,handler:i})}function l(e){var t={_registeredHandlers:[]};return e.handlers(function(e,t,a,n){Object(i.addEvent)(t,a,n),e._registeredHandlers.push({handlerType:"bind",elem:t,types:a,handler:n})}.bind(null,t),c.bind(null,t)),t}function p(e){e._registeredHandlers.forEach(function(e){var t,a,n,s,c;"delegate"===e.handlerType?(t=e.elem,a=e.types,n=e.selector,s=e.handler,(c=o.get(t))&&(a.split(" ").forEach(e=>{c[e]&&(c[e]=c[e].filter(e=>e[0]!==n||e[1]!==s),0===c[e].length&&removeEvent(t,e,r))}),0===Object.keys(c).map(e=>c[e].length).reduce((e,t)=>e+t)&&o.delete(t))):Object(i.removeEvent)(e.elem,e.types,e.handler)}),e._registeredHandlers=[]}a.d(t,"createMutations",function(){return s}),a.d(t,"createModule",function(){return l}),a.d(t,"destroyModule",function(){return p})},uRA3:function(e,t,a){"use strict";a.r(t),a.d(t,"abortPatternMild",function(){return c}),a.d(t,"noSpamPatterns",function(){return l});var n,o,r,i=a("awNS"),s={};function c(e){ajax.post("noSpam.php",{act:"a_abort_pattern_mild",pid:e},{onDone:function(){ge("abort_pattern_mild"+e).innerHTML="<span style = 'color: green'>остановлен</span>"},onFail:function(){ge("abort_pattern_mild"+e).innerHTML="<span style = 'color: red'>ошибка</span>"}})}var l={patternTooltip:function(e,t){var a={content:s[t]?s[t].tooltip:"",className:"pattern_tt_wrap",nohideover:0,showsp:150,slide:15,hasover:0,shift:[5,0,0]};return showTooltip(e,a)},updateProcess:function(e){var t=vkNow();"patterns"===Object(i.activeTab)()&&-1!=window._wf&&((t-o>5e3||e)&&(ajax.post("noSpam.php",{act:"a_in_process"},{onDone:function(e){var t=ge("in_process");if(t)return e>0?animateCount(t,e):t.innerHTML=e},onFail:function(e){ge("in_process").innerHTML=e||"Неизвестная ошибка (banProcess)"}}),o=t),(t-n>1e4||e)&&(ajax.post("noSpam.php",{act:"a_last_patterns"},{onDone:function(e){var t=geByClass1("in_process_wrap");if(t){show(t);var a=e.table;delete e.table,s=e,ge("patterns").innerHTML=a}},onFail:function(e){var t=geByClass1("in_process_wrap");if(t)return t.innerHTML=e||"Неизвестная ошибка (pProcess)"}}),n=t))},clearTimer:function(){clearInterval(r)},initUpdate:function(){this.updateProcess(!0),r||(r=setInterval(this.updateProcess,1e3),cur.destroy.push(this.clearTimer))}}}}]);try{stManager.done("cmodules/bundles/637aa6036536cb04f3a1f378656a0595.eff89dcb648ca85471ef.js")}catch(e){}