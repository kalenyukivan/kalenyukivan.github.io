!function(e){function t(t){for(var r,o,n=t[0],c=t[1],s=t[2],_=0,h=[];_<n.length;_++)o=n[_],i[o]&&h.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);h.length;)h.shift()();return l.push.apply(l,s||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],r=!0,n=1;n<a.length;n++){var c=a[n];0!==i[c]&&(r=!1)}r&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},i={"web/article_layer":0},l=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var d=c;l.push([105,"bundles/common","bundles/637aa6036536cb04f3a1f378656a0595","bundles/3113b7f72dc7a6cb1bd72a96856988db"]),a()}({105:function(e,t,a){e.exports=a("VmBg")},VmBg:function(e,t,a){"use strict";a.r(t);a("pIFo"),a("rGqo"),a("Btvt");var r,i,l,o=a("31O9"),n=a("EE0W"),c=a("4+be"),s=a("t7n3"),d=a("zxIV"),_={open:function(e,t,a){var l=this,o=Object(n.getAppropriateImage)(e[0],window.innerWidth,!0),c=o[0],s=h({width:o[1],height:o[2]},{width:window.innerWidth,height:window.innerHeight}),_=Object(d.getW)(a)<s.width&&Object(d.getH)(a)<s.height;if(c&&_){var g=Object(d.se)('<div class="article_full_view"><img class="article_full_view__image"></div>'),u=Object(d.geByTag1)("figcaption",a);u&&u.innerHTML&&g.appendChild(Object(d.se)('<div class="article_full_view__caption"><div class="article_full_view__caption_inner">'+u.innerHTML+"</div></div>")),i=Object(d.se)('<div class="article_full_view__counter"><div class="article_full_view__counter_text"></div><div class="article_full_view__close"></div></div>'),g.appendChild(i),e.length>1&&Object(d.toggleClass)(i,"article_full_view__carousel",e.length>1),Object(d.geByClass1)("_article_layer").appendChild(g),g.addEventListener("click",function(e){Object(d.domClosest)("article_full_view__caption_inner",e.target)||l.close()}),g.addEventListener("mousewheel",this.close),r=g;var b=Object(d.geByTag1)("img",g);this._showImage(b,e,t),window.articleCloseImageFullSize=this.close.bind(this)}},_showImage:function(e,t,a){(Object(d.toggleClass)(void 0,"article_full_view__nav_hidden",0==a),Object(d.toggleClass)(void 0,"article_full_view__nav_hidden",a==t.length-1),t.length>1)&&(Object(d.geByClass1)("article_full_view__counter_text",i).innerHTML=Object(c.getLang)("global_article_carousel_counter").replace("{counter}",a+1).replace("{total}",t.length));l=a;var r=!1,o=Object(n.getAppropriateImage)(t[a],window.innerWidth,!0),_=o[0],g=h({width:o[1],height:o[2]},{width:window.innerWidth,height:window.innerHeight});if(Object(n.preloadImage)(_,function(){if(l===a){r=!0,g.width&&Object(s.isNumeric)(g.width)?Object(d.setStyle)(e,{width:g.width,height:g.height}):Object(d.setStyle)(e,{width:null,height:null}),e.src=_,Object(d.removeClass)(e,"article_full_view__image_blurred");for(var i=a;i<Math.min(a+3,t.length);i++){var o=Object(n.getAppropriateImage)(t[i],window.innerWidth,!0)[0];Object(n.preloadImage)(o)}}}))Object(d.removeClass)(e,"article_full_view__image_blurred");else{var u=Object(n.getAppropriateImage)(t[a],200,!0)[0];Object(n.preloadImage)(u,function(){l===a&&(r||(Object(d.setStyle)(e,{width:g.width,height:g.height}),e.src=u))}),Object(d.addClass)(e,"article_full_view__image_blurred")}},close:function(){return delete window.articleCloseImageFullSize,!!r&&(Object(d.re)(r),r=null,!0)}};function h(e,t){var a=e.width/e.height,r={width:0,height:0};return a>t.width/t.height?(r.width=Math.min(t.width,e.width),r.height=e.height*(r.width/e.width)):(r.height=Math.min(t.height,e.height),r.width=r.height*a),r}var g,u=[],b=!1,p=!1;class w{static init(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(p=a.mobile||a.isWebView,t&&e.ads&&!isEmpty(e.ads)&&!(e.has_more||isArray(e.ads)&&0==e.ads.length)){var r=ce("ins");addClass(r,"mrg-tag"),addClass(r,"article_adsblock"),a.mobile&&addClass(r,"article_adsblock_mobile"),setStyle(r,{display:"block","text-decoration":"none"});var i="";for(var l in a.deviceInfo)a.deviceInfo.hasOwnProperty(l)&&(i+="&"+l+"="+a.deviceInfo[l]);for(var o in e.ads.data["ad-query"]=e.ads.data["ad-query"].replace("%device_info%",i),e.ads.data)e.ads.data.hasOwnProperty(o)&&domData(r,o,`${e.ads.data[o]}`);t.appendChild(r),window.MRGtag||(window.MRGtag=[]);var n=a.isWebView?{iframeMode:!0}:{},c=e.ads.eventsHash;if(v(e,a,"requested",c),n.onNoAds=()=>{v(e,a,"no_ads",c)},n.onAdsLoaded=()=>{v(e,a,"ads_loaded",c)},n.onAdsClosed=()=>{v(e,a,"ads_closed",c)},n.onAdsSuccess=()=>{v(e,a,"ads_success",c)},n.onAdsClicked=()=>{v(e,a,"ads_clicked",c)},n.onScriptError=()=>{v(e,a,"script_error",c)},window.MRGtagOnAdsImpression=()=>{v(e,a,"ads_impression",c)},window.MRGtag.push(n),!window.mailRuSdsScriptLoaded){var s=document.createElement("script");s.setAttribute("src",e.ads.script),s.setAttribute("async","true"),document.head.appendChild(s),window.mailRuSdsScriptLoaded=!0}}}static wasShown(){return b}}function v(e,t,a,r){u.push(`${a}/${e.owner_id}_${e.id}/${r}`),clearTimeout(g),g=setTimeout(()=>{var e=p?"article.php":"al_articles.php";ajax.post(e,{act:"ads_event",events:u.join(","),is_web_view:intval(t.isWebView)}),u=[]},200)}var y,f,m,j,O,S,C,k,B,L,x=a("RbYe"),T=a("FThC"),A=a("v+DW"),E=a("EasH"),F=a("/PiP"),D=20,M=.6,I="article_dark_mode",P=115,R="article_layer__content_wait_next",H={},V={},$="",W=!1,N={},q={},G=[],z=[],Q=!1;class J{static openEditor(e,t,a,r){if(!J.isStandalone())return J.close(!0),setTimeout(()=>{nav.change({z:`article_edit${t}_${a}`,from_rev:!!r&&1})},100),cancelEvent(e)}static isStandalone(){return!W}static setFaded(e){toggleClass(q.layer,"article_layer__faded",e)}static updateLocation(){var e=0,t=!1;z.forEach(a=>{var r=a.getScreenVisibilityRatio();r>=e&&(t=a.getArticle(),e=r)}),t&&O.raw_id!=t.raw_id&&(O=t,history.replaceState({layer:!0},t.title,t.url),Object(d.lockDocumentTitle)(!1),setDocumentTitle(t.title),Object(d.lockDocumentTitle)(!0))}static _toggleArticleVisibility(e,t){var a=Object(d.ge)(`article_view_${e}`);t=Object(s.intval)(t),Object(s.intval)(domData(a,"visible"))!=t&&(domData(a,"visible",t),setStyle(a,"visibility",t?"":"hidden"))}static _initArticleView(e,t){if(!J.isArticleWithoutData(e)){var a=gpeByClass("article_layer__content",Object(d.ge)(`article_view_${e.raw_id}`));a||(Object(d.removeClass)(J._getLastContentEl(),R),a=se(t),z.length>0&&(Object(d.addClass)(a,"article_layer__next_prepared"),requestAnimationFrame(()=>{Object(d.removeClass)(a,"article_layer__next_prepared")})),q.viewsList.appendChild(a));var r=z.length,i=new o.default(e,{getScrollNode:this.getScrollNode.bind(this),getScrollTop:this.getScrollTop.bind(this),isStandalone:J.isStandalone(),objectsInitDelay:0==r?0:350,onScroll:t=>{if(!vk.widget){e.next_article_url&&t>M&&J._canShowMoreView()&&(J.prepare(e.next_article_url,null,{ref:"scroll"}),Object(d.addClass)(J._getLastContentEl(),R)),t>0&&t<1&&0==r&&J._updateScrollSet(e);var a=i.getScreenVisibilityRatio();J.updateLocation(),J._toggleArticleVisibility(e.raw_id,a>0)}},onImageOpen:(e,t,a)=>{_.open(e,a,t)}},{},!0);z.push(i);var l=Object(d.geByClass1)("article_layer_ads_place",a);w.init(e,l,N),J._checkBottomReach(),J.moderActionsInit(e,a);var c=Object(d.geByClass1)("article_layer__mentions",a);c&&c.addEventListener("click",e=>{i.sendStats({type:n.ArticleStatsEvents.clickOnMentions})})}}static _getLastContentEl(){var e=geByClass("article_layer__content");return e[e.length-1]}static _initBottomReached(){G.push(()=>{J._checkBottomReach()})}static _checkBottomReach(){var e=Object(d.geByClass1)("article_layer__views");if(J.getScrollTop()+window.innerHeight+200>=e.offsetHeight){if(L)return;var t=z[z.length-1].getArticle();J._canShowMoreView()&&t.next_article_url&&(J.prepare(t.next_article_url),L=setTimeout(()=>{J._loadNextArticle(t.next_article_url),L=!1},300))}}static _canShowMoreView(){return z.length<D}static closeImageFullSize(){return _.close()}static _loadNextArticle(e){J.prepare(e,(e,t)=>{J._initArticleView(t,e)})}static _restoreScroll(e){var t=J._getSavedScroll(e.url);J.setScrollTop(t)}static _deinitLayer(){G.forEach(e=>{var t=J.getScrollNode();t&&t.removeEventListener("scroll",e)}),G.splice(0,G.length),clearTimeout(L)}static _removeAllViews(){z.forEach(e=>{e.deinit()}),z.splice(0,z.length),q.viewsList&&(q.viewsList.innerHTML="")}static show(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!J.isArticleWithoutData(e))if(W=t,void 0!==r&&(N=r),a&&(boxRefreshCoords(boxLoader),Object(d.show)(boxLoader),Object(d.show)(boxLayerWrap)),J._deinitLayer(),layers.fullhide=!1,Object(s.isObject)(e)){var i=e;J._initLayer(),J._initArticleView(i),O=i,J._restoreScroll(i),J._initFooter()}else J.setFaded(!0),J.prepare(e,(e,t,i)=>{J.setFaded(!1),a&&(Object(d.hide)(boxLoader),Object(d.hide)(boxLayerWrap)),J._removeAllViews(),!0!==i.error?(J._initLayer(),J._initArticleView(t,e),O=t,J._restoreScroll(t),J._initFooter(),t.title&&(j=document.title,Object(d.lockDocumentTitle)(!1),setDocumentTitle(Object(s.replaceEntities)(Object(s.stripHTML)(t.title))),Object(d.lockDocumentTitle)(!0)),r.ev&&domClosest("bookmarks_row_type_article",r.ev.target)&&statlogsValueEvent("bookmarks_product_analytics",{item_type:"article",item_owner_id:t.owner_id,item_id:t.id,time:window.getServerTime()}),Object(s.isFunction)(r.onShowDone)&&r.onShowDone()):Object(E.showFastBox)({title:Object(c.getLang)("global_error")},i.error_message||Object(c.getLang)("global_unknown_error"))},{async:r.prepareAsync})}static isShown(){return!!q.layer}static isArticleWithoutData(e){return Object(s.isArray)(e)&&0===e.length}static back(){var e=z.length&&z[0].getArticle();if(J.isStandalone())if(e&&e.is_blog){if(e.from_blog&&window.history&&window.history.length>1)return window.history.back(),!0;location.href=e.owner_href}else location.href="/feed";else history.go(-1)}static close(e){if(!J.isShown())return!0;var t=z.length&&z[0].getArticle(),a=t?t.owner_href:"",r=O.back_url;if(J.isStandalone())return t.is_blog&&t.from_blog&&window.history&&window.history.length>1?(window.history.back(),!0):(window.location.href=r||a||"/feed",!0);if(window.onbeforeunload=!1,layers&&layers.hide&&layers.hide(),vk.widget)window.Rpc&&window.Rpc.callMethod("destroy");else{if(e){J._deinitLayer();var i=-1;window.cur&&cur.articleSequence&&(i=-cur.articleSequence),history.go(i),cur.articleSequence=0}else J._removeAllViews(),Object(d.removeClass)(bodyNode,"body_article_layer"),j&&(Object(d.lockDocumentTitle)(!1),setDocumentTitle(j)),Object(d.re)(q.layer),q.layer=!1,Object(s.isFunction)(k)&&k();m&&m.destroy(),window.FastChat&&FastChat.toggleFastChats(!0),y&&window.removeEventListener("beforeunload",y),y=!1}}static getScrollNode(){return J.isStandalone()?window:q.layer}static getScrollTop(){return J.isStandalone()?scrollGetY():q.layer.scrollTop}static setScrollTop(e){(J.isStandalone()?window.scrollNode:q.layer).scrollTop=e}static _initLayer(){if(!q.layer){if(q.layer=Object(d.geByClass1)("_article_layer"),!q.layer){if(!$)throw new Error("Article layer html not found");q.layer=se($),document.body.appendChild(q.layer),Object(d.addClass)(bodyNode,"body_article_layer"),setStyle(q.layer,{opacity:1})}q.up=Object(d.geByClass1)("article_layer__up",q.layer),q.darkBtn=Object(d.geByClass1)("article_layer__dark",q.layer),q.closeBtn=Object(d.geByClass1)("article_layer__close",q.layer),q.placeholderCloseBtn=Object(d.geByClass1)("article_layer_placeholder__back_button",q.layer),q.viewsList=Object(d.geByClass1)("article_layer__views",q.layer),S&&q.darkBtn.removeEventListener("click",S),q.darkBtn.addEventListener("click",S=()=>{J._toggleDarkMode(),z[z.length-1].sendStats({type:Q?n.ArticleStatsEvents.nightModeOn:n.ArticleStatsEvents.nightModeOff})}),C&&q.closeBtn.removeEventListener("click",C),q.closeBtn.addEventListener("click",C=()=>{(J.close(!0),z.length)&&z[z.length-1].sendStats({type:n.ArticleStatsEvents.close})}),vk.widget&&Object(d.re)(q.up),q.placeholderCloseBtn&&(B&&q.placeholderCloseBtn.removeEventListener("click",B),q.placeholderCloseBtn.addEventListener("click",B=J.close.bind(null,!0))),q.scrollNode=vk.widget||!J.isStandalone()?q.layer:document.scrollingElement,J.isStandalone()||(y&&window.removeEventListener("beforeunload",y),window.addEventListener("beforeunload",y=()=>{window.scrollTo(0,0)})),J.getScrollNode().addEventListener("scroll",e=>{G.forEach(t=>{t(e)})}),G.push(()=>{toggleClass(q.up,"article_layer__up--shown",J.getScrollTop()>0)});var e=Object(d.geByClass1)("article_layer__inner",q.layer);f=se(`<div class='article_anchor_tooltip_content'>${Object(c.getLang)("pages_article_anchor_copy")}</div>`),m=new ElementTooltip(q.layer,{content:f,autoShow:!1,customShow:!0,forceSide:"top",cls:"article_anchor_tooltip",noBorder:!0,onHide:()=>{f.innerHTML=Object(c.getLang)("pages_article_anchor_copy")}}),q.layer.addEventListener("mousemove",t=>{if(toggleClass(q.layer,"article_layer__hover_left",e.contains(t.target)&&t.pageX<P),Object(d.hasClass)(t.target,"article_anchor_button")&&m&&!m.isShown()){var a=t.target.getBoundingClientRect(),r=a.top,i=a.left;m.show();var l=m._ttel.getBoundingClientRect(),o=J.getScrollTop();setStyle(m._ttel,{top:r+o-l.height-5,left:i-l.width/2+13}),t.target.addEventListener("mouseout",()=>{m.hide()})}}),q.layer.addEventListener("click",e=>{if(Object(d.hasClass)(q.layer,"article_layer__hover_left")&&(Object(d.hasClass)(q.up,"article_layer__up--shown")?J.setScrollTop(0):J.back()),Object(d.hasClass)(e.target,"article_anchor_button")&&e.target.id){var t=gpeByClass("article_view",e.target),a=domData(t,"article-url"),r=`${location.protocol}//${location.host}${a}`;Object(d.domClosestByTag)("h1",e.target)?Object(x.copyToClipboard)(r):Object(x.copyToClipboard)(`${r}?anchor=${e.target.id}`),f.innerHTML=Object(c.getLang)("pages_article_anchor_copied")}Object(d.hasClass)(q.layer,"article_layer__hover_right")&&J.close(!0)}),window.FastChat&&window.FastChat.toggleFastChats(!1),J._initBottomReached()}}static _initFooter(){if(vk.id){var e,t,a,r={Static:"static",FixedShown:"fix_shown",FixedHidden:"fix_hidden"},i=!1,l=J.getScrollTop(),o=!0;G.push(a=()=>{O||(O=z[0].getArticle());var e=Object(d.ge)("article_view_"+O.raw_id),a=gpeByClass("article_layer__content",e),n=Object(d.geByClass1)("article_layer__content_footer",a);if(a&&n){var s=J.getScrollTop(),_=s<=l;l=s,i!=n&&(t=a.offsetTop+n.offsetTop,c(i,r.Static)),i=n;var h=s+window.innerHeight<t-100;c(n,h?!h||_?r.FixedShown:r.FixedHidden:r.Static,o),o=!1}}),a()}function n(e,t){setStyle(e,"transform",`translateY(${t?"0%":"100%"}`)}function c(t,a,i){var l=domData(t,"state")||r.Static;l!=a&&(e||(l==r.Static?a==r.FixedShown?(n(t,!1),i?(Object(d.addClass)(t,"article_layer__content_footer--fix"),n(t,!0)):e=setTimeout(()=>{Object(d.addClass)(t,"article_layer__content_footer--fix"),e=setTimeout(()=>{n(t,!0),e=!1})})):a==r.FixedHidden&&(n(t,!1),e=setTimeout(()=>{Object(d.addClass)(t,"article_layer__content_footer--fix"),e=!1})):l==r.FixedShown?a==r.FixedHidden?n(t,!1):a==r.Static&&(n(t,!1),e=setTimeout(()=>{Object(d.removeClass)(t,"article_layer__content_footer--fix"),n(t,!0),e=!1},350)):l==r.FixedHidden&&(a==r.FixedShown?n(t,!0):a==r.Static&&(Object(d.removeClass)(t,"article_layer__content_footer--fix"),n(t,!0))),domData(t,"state",a)))}}static onShareBtnClick(e,t){showBox("like.php",{act:"publish_box",object:t},{stat:["page.js","page.css","wide_dd.js","wide_dd.css",jsc("web/sharebox.js")],onFail:function(e){return Object(E.showFastBox)(Object(c.getLang)("global_error"),e||Object(c.getLang)("global_error")),!0}})}static onFaveBtnClick(e,t,a,r,i,l){var o=gpeByClass("article_layer__content",domQuery1(`[data-article-url="${i}"]`));window.stManager.add(["notifier.css","notifier.js"]);var n=!1;Object(s.each)(geByClass("article_layer__content_footer_button_bookmark",o),(e,t)=>{n=toggleClass(t,"activated")}),Object(F.bookmarkArticle)(null,null,t,a,"article",l,!n)}static onReportBtnClick(e,t,a,r){var i=showBox("al_articles.php",{act:"report_box"},{onDone:()=>{var e=geByClass("radiobtn","article_report");radioBtns.article_report={val:0,els:e}},params:{onClean:()=>{delete radioBtns.article_report}}});i.removeButtons(),i.addButton(Object(c.getLang)("box_send"),e=>{J._sendReport(e,t,a,r)}),i.addButton(Object(c.getLang)("global_cancel"),!1,"no")}static _sendReport(e,t,a,r){ajax.post("al_articles.php",{act:"report",owner_id:t,article_id:a,hash:r,reason:radioBtns.article_report.val},{onDone:()=>{curBox().hide(),showDoneBox(Object(c.getLang)("pages_article_report_sent"),{className:"article_done_msg",parentEl:"_article_layer"})},showProgress:A.lockButton.pbind(e),hideProgress:A.unlockButton.pbind(e)})}static _getSavedScroll(e){return(window.ls.get("articles_scrolls")||{})[e]||0}static _updateScrollSet(e){var t=J.getScrollTop(),a=ls.get("articles_scrolls")||{};Object.keys(a).length>100&&(a={}),a[e.url]=t,ls.set("articles_scrolls",a)}static getDarkMode(){return!!Object(s.intval)(localStorage.getItem(I))}static _toggleDarkMode(e,t){Q=toggleClass(q.layer,"article_dark",t),J.isStandalone()&&toggleClass(document.body,"article_dark",Q),t?toggleClass(q.layerSubscribeBtn,"black",Q):(Object(d.addClass)(q.layerSubscribeBtn,"article_layer_btn_transition"),setTimeout(()=>{Object(d.removeClass)(q.layerSubscribeBtn,"article_layer_btn_transition")},450),Object(d.toggleClassDelayed)(q.layerSubscribeBtn,"black",Q)),void 0===t&&vk.id&&ajax.post("al_articles.php",{act:"set_dark_mode",is_on:Object(s.intval)(Q)}),localStorage.setItem(I,Object(s.intval)(Q))}static clearAllPrepared(){H={}}static clearPrepared(e){e=e.replace(/^\//,""),delete H[e]}static prepare(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t||(t=()=>{}),Object(s.isObject)(e)&&(e=e.url),e=e.replace(/^\//,""),Object(s.isObject)(H[e])){var r=()=>t(...H[e].result);return a.async?void setTimeout(r,0):r()}if(H[e]=H[e]||[],H[e].push(t),!(H[e].length>1)){var i=Object(s.inArray)(cur.module,["groups","profile","public"])?cur.oid:"",l="",o="";a.ref&&(o=a.ref),Object(s.isFunction)(a.onCloseCallBack)&&(k=a.onCloseCallBack),l=cur.authorPage?"author_page_"+cur.authorPage.sortType:cur.module,ajax.post("al_articles.php",{act:"view",url:e,layer:1,wall_owner_id:i,context:l,ref:o},{onDone:(t,a,r,i)=>{var l=H[e]||[];$=t,H[e]={result:[a,r,i]},l.forEach(t=>t.apply(null,H[e].result))},onFail:()=>(Object(s.isFunction)(a.onCloseCallBack)&&a.onFailCallBack(),!0)}),window.cur&&cur.destroy.push(()=>{J.clearPrepared()})}}static clearPrepared(){H={}}static onSubscribeBtnClick(e){if(!Object(A.isButtonLocked)(e)){var t=JSON.parse(domData(e,"data")),a=Object(d.hasClass)(e,"secondary"),r={showProgress:A.lockButton.pbind(e),hideProgress:A.unlockButton.pbind(e),onDone:function(){V[t.oid]=!a,toggleClass(e,"secondary"),t.confirm&&a&&Object(d.hide)(e)}};if(t.oid>0)ajax.post("al_friends.php",{act:a?"remove":"add",mid:t.oid,hash:t.hash},r);else{var i=ajax.post.pbind("al_groups.php",{act:a?"a_leave":"a_enter",gid:-t.oid,hash:t.hash},r);if(t.confirm&&a)var l=Object(E.showFastBox)(t.confirm.title,t.confirm.text,t.confirm.btn,function(){l.hide(),i()},Object(c.getLang)("global_cancel"));else i()}}}static moderActionsInit(e,t){var a=e.moder_actions_hash,r=domQuery1("#article_moder_rev_sel",t);r&&r.addEventListener("change",e=>{nav.change({rev:e.target.value}),location.reload()});var i=domQuery1("#article_moder__rev_restore",t);i&&i.addEventListener("click",()=>{r.value&&ajax.post("al_articles.php",{act:"moder_restore_article_rev",hash:a,article_owner_id:e.owner_id,article_id:e.id,revision:Object(s.intval)(r.value)},{showProgress:A.lockButton.pbind(i),onDone:()=>{nav.change({rev:!1}),location.reload()}})});var l=domQuery1("#article_moder__ban_btn",t);if(l){var o=Object(s.intval)(l.getAttribute("data-banned"))?0:1;l.addEventListener("click",()=>{var t={act:"moder_ban_article",hash:a,article_owner_id:e.owner_id,article_id:e.id,do_ban:Object(s.intval)(o)};Object(T.isClaimContent)()&&(t.claim=window.nav.objLoc.claim),ajax.post("al_articles.php",t,{showProgress:A.lockButton.pbind(l),onDone:()=>{location.reload()}})})}}}window.ArticleLayer=J;try{window.stManager.done(window.jsc("web/article_layer.js"))}catch(e){}}});